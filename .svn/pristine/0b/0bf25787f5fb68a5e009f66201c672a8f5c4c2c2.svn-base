<%@ page contentType="text/html; charset=UTF-8" language="java"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html>
<head>
<title>新增采购信息</title>
<link rel="stylesheet" type="text/css" href="Module/css/reset.css"/>
<link href="Module/css/pagination.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="Module/css/commonCss.css"/>
<link rel="stylesheet" type="text/css" href="Module/css/iconfont.css"/>
<link rel="stylesheet" type="text/css" href="Module/purchase/css/purchaseCss.css"/>
<link rel="stylesheet" type="text/css" href="Module/commonJs/timeControl/css/ion.calendar.css"/>
<script src="Module/commonJs/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="Module/commonJs/comMethod.js" type="text/javascript" charset="utf-8"></script>
<script src="Module/purchase/js/goPurchaseJs.js" type="text/javascript" charset="utf-8"></script>
<script src="Module/commonJs/checkStr.js" type="text/javascript" charset="utf-8"></script>
<script src="Module/basicInfo/js/commonExec.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="Module/commonJs/jquery.pagination.js"></script>
<script type="text/javascript">
var roleName = "${sessionScope.login_user_dep_name}";
var creScroll = true;
var creScrll_pur = true;
var dbFlag = true;
var parHeight = 0;
var pageSize = 8;
var page_index = 0;
var bTypeId_a = 0;
var pyCode_a = "";
var page_index_p = 0;//选择产品
var pTypeId_a = 0;//产品类别编号
var pyCode_p_a = "";//产品拼音码
//---------------------浏览采购订单页面用---------------------------//
var sTime_a = "";
var eTime_a = "";
var inStatus_a = -1;//全部
var payStatus_a = -2;//全部
var purOrder_a = 0;
var option_a = 0;
var page_index_pur = 0;//采购单
var option_tr = "purchase";//区别供应商的doubleTrClick()
$(function(){
	judgeTime_1();
	if(roleName == "采购" ){
		bankNumPattern("bankAcc","pattbBankNum");
		selPayPeoCategSty($(".payStatusRad"),$("#payStatusInp"));//付款状态
		selPayPeoCategSty($(".inVoiceRad"),$("#invoInp_hid"));//有无发票
		getSysTime($("#madeTimeP"));
	}else{
		$("#headFunArea").html('<a id="viewPurBtn" href="javascript:void(0)" onclick="selPurchaseTab(2)">浏览采购单</a>');
		selPurchaseTab(2);
	}
});
//浏览采购单下的数据瀑布流
function waterFall(parent,box){
	var oParent = getId(parent);
	var aBoxes = getByClass(parent,box);
	if(aBoxes.length > 0){
		//计算父级层下一行显示的列数(父级宽/box的宽)
		var oBoxW = aBoxes[0].offsetWidth;
		var cols = Math.floor(1200 / oBoxW);
		var hArr = [];
		for(var i=0;i<aBoxes.length;i++){
			aBoxes[i].setAttribute("id","mainLi_"+i);
			if(i<cols){//表示第一行
				hArr.push(aBoxes[i].offsetHeight);
				aBoxes[0].style.marginRight = 20+ "px";
			}else{
				var minH = Math.min.apply(null,hArr);//计算一组数组中的最小高度
				var index = getMinhIndex(hArr,minH); //获取最小高度的index索引
				aBoxes[i].style.position = "absolute";
				aBoxes[i].style.top = minH+ "px";
				//aBoxes[i].style.left = oBoxW * index + "px";
				aBoxes[i].style.left = aBoxes[index].offsetLeft + "px";
				hArr[index] += aBoxes[i].offsetHeight;
				
			}
		}	
		//alert(minH + "_" + hArr[index])
		oParent.style.height = hArr[index] + "px";
	}
}
//获取一组数据中的最小高度对应的索引值
function getMinhIndex(arr,val){
	for(var i in arr){
		if(arr[i] == val){
			return i;
		}
	}
};
//获取Class公共方法
function getByClass(oParent,sClass){
	var aEle = document.getElementsByTagName("*");
	var aResult = [];
	for(var i=0;i<aEle.length;i++){
		if(aEle[i].className == sClass){
			aResult.push(aEle[i]);
		}
	}
	return aResult;
}
//查看付款记录
function showPayHistory(poId){
	$("#payHisLayerDiv_"+poId).show().height($("#payRecordDiv_"+poId).height() - 41);
	$("#payHisListDiv_"+poId).height($("#payHisLayerDiv_"+poId).height() - 105);
	if($("#payHisListUl_"+poId).height() > $("#payHisListDiv_"+poId).height()){
		var scroll = "<div id='scrollPar_"+poId+"' class='parScrollHis'><div id='scrollSon_"+poId+"' class='sonScrollHis'></div></div>";
		$("#payHisListDiv_"+poId).append(scroll);
		$("#scrollPar_"+poId).height($("#payHisListDiv_"+poId).height());
		scrollBar("payHisListDiv_"+poId,"payHisListUl_"+poId,"scrollPar_"+poId,"scrollSon_"+poId,15);
	}
	$("#payHisListDiv_"+poId +" li:odd").addClass("oddColor");
	
};
//根据供应商类别高度、产品类别的高度来动态创建模拟滚动条
function createLeftScroll(bigParBox,parBox,sonBox,options){
	if($("#"+sonBox).height() > $("#"+parBox).height()){
		if(options == 1){//选择供应商左侧模拟滚动条
			var scroll = "<div id='scrollPar_1' class='parScroll'><div id='scrollSon_1' class='sonScroll'></div></div>";	
		}else if(options == 2){//选择产品左侧模拟滚动条
			var scroll = "<div id='scrollPar_2' class='parScroll'><div id='scrollSon_2' class='sonScroll'></div></div>";
		}
		$("."+bigParBox).append(scroll);
		if(options == 1){
			scrollBar(parBox,sonBox,"scrollPar_1","scrollSon_1",15);
		}else if(options == 2){
			scrollBar(parBox,sonBox,"scrollPar_2","scrollSon_2",15);
		}
	}
}
//新增采购单下选取供应商数据 、选取供应商下商品的数据层弹窗
function showCorrUnProInfDiv(options){
	if(options == 1){//选取供应商
		getCommonType("bType");
		$(".purDataDiv").show();
		inpTipFocBlur("searInput","请输入往来单位拼音码","#999","#666");
		createLeftScroll("corUnCategDataDiv","categDataDivPur","categDataUlPur",1);
	}else if(options == 2){//选取商品
		getCommonType("pType");
		$(".proInfoDiv").show();
		createLeftScroll("proCategDataDiv","categDataDivPro","categDataUlPro",2);
		inpTipFocBlur("searInput_pro","请输入产品拼音码","#999","#666");
	}
	$(".layer").show();
	
}
//关闭选取供应商 选取产品弹窗的公共关闭
function closeAlertWin(obj,option){
	$(obj).hide();
	$(".layer").hide();
	if($(".parScroll").length > 0){
		$(".parScroll").remove();
		$(".categDataUl").css({"top":0});
	}
	if(option == "selBus"){
		$("#dataListTab_un").html("");
		$("#searInput").val("请输入往来单位拼音码");
	}else if(option == "selPro"){
		$("#dataListTab_pro").html("");
		$("#searInput_pro").val("请输入产品拼音码");
		$("#selAllPro").attr("checked",false);
		$(".selAllLab").find("i").remove();
		$(".selAllTxt").html("全选");
	}
	
}
//添加单位类别、单位基本信息、产品类别、产品基本信息窗口
function showComAddWin(options){
	$(".closeIcon").hide();
	$(".addNewDataDiv").show().animate({"top":50},function(){
		if(options == 1){//添加单位类别
			$(".addCorrUnDiv").show();
		}else if(options == 2){//添加单位基本信息
			$(".addCorrUnInfo").show();
		}else if(options == 3){//添加产品类别
			$(".addProCategDiv").show();
		}else if(options == 4){//添加产品基本信息
			$(".addProInfoDiv").show();
			selPayPeoCategSty($(".comCategStyInp"),$("#categStyInp"));
		}
	});
}
//取消添加单位类别、单位基本信息、产品类别、产品基本信息窗口
function comCancelAdd(options){
	$(".addNewDataDiv").animate({"top":-400},function(){
		if(options == 1){//关闭添加单位类别
			$(".addCorrUnDiv").hide();
			clearAddBtInfo();
		}else if(options == 2){//关闭添加单位基本信息
			$(".addCorrUnInfo").hide();
			clearAddBcInfo();
		}else if(options == 3){//关闭添加产品类别
			$(".addProCategDiv").hide();
			//清空数据
			$("#proType_add").val("");
			$("#typeRemark_add").val("");
			//隐藏提示层
			$("#categProNaDiv").hide();
		}else if(options == 4){//关闭添加产品基本信息
			$(".addProInfoDiv").hide();
			//清空DIV数据
			clearAllAddProInfo();
		}
		$(".addNewDataDiv").hide();
		$(".closeIcon").show();
	});
}
//根据产品类别数量多少动态创建模拟滚动条
function crePorCategScroll(){
	if($("#selCategUl_pro").height() > $("#selCategWrap_pro").height()){
		//创建模拟滚动条
		var scroll = "<div id='scrollPar_pro' class='parScroll_pro'><div id='scrollSon_pro' class='sonScroll_pro'></div></div>";
		if(creScroll){
			$("#selCategWrap_pro").append(scroll);
			scrollBar("selCategWrap_pro","selCategUl_pro","scrollPar_pro","scrollSon_pro",15);
		}
		creScroll = false;
	}
}
function selCategBankWin(options){
	//1:查看产品类别   2:查看单位类别  3:选择银行
	if(options == 1){
		$(".selProCategLay").show().animate({"opacity":1});
		if($(".selCategDiv_pro p").html() == ""){//暂未选择银行
			$("#nowCateg_pro").html("暂未选择产品类别");
		}else{
			$("#nowCateg_pro").html($(".selCategDiv_pro p").html());
			matchingHtml($("#selCategWrap_pro li"),$("#nowCateg_pro"));
		}
		getProType();
		addLiActive($("#selCategWrap_pro li"),$("#nowCateg_pro"));
		crePorCategScroll();
	}else if(options == 2){
		$(".selCategLay").show().show().animate({"opacity":1});;
		if($(".selCategDiv_un p").html() == ""){//暂未选择单位类别
			$("#nowCateg_unit").html("暂未选择单位类别");
		}else{
			$("#nowCateg_unit").html($(".selCategDiv_un p").html());
			matchingHtml($("#selCategWrap_un li"),$("#nowCateg_unit"));
		}
		getCommonType("selBtype");
		addLiActive($("#selCategWrap_un li"),$("#nowCateg_unit"));
	}else if(options == 3){
		$(".selBankLay").show().show().animate({"opacity":1});;
		if($(".selBankDiv p").html() == ""){//暂未选择银行
			$("#nowBank").html("尚未选择开户银行");
		}else{
			$("#nowBank").html($(".selBankDiv p").html());
			$(".com_BankRdio").each(function(i){
				if($("#nowBank").html() != "" && $(".com_BankRdio").eq(i).val() == $("#nowBank").html()){
					$(".com_BankRdio").parent().removeClass("active");
					$(this).parent().addClass("active");
					$(this).parent().append("<b></b>");
				}
			});
		}
		choiceOptionAns($(".com_BankRdio"),"active",3);
	}
}
function addLiActive(obj,objHtml){
	$(obj).each(function(){
		$(this).click(function(){
			$(obj).removeClass("active");
			$(this).addClass("active");
			$(objHtml).html($(this).html());
		});
	});
}
function matchingHtml(obj,objHtml){
	var htmlCon = objHtml.html();
	$(obj).each(function(i){
		if(htmlCon != "" && $(obj).eq(i).html() == htmlCon){
			$(obj).eq(i).addClass("active");
		}
	});
}
function comCanCategBankWin(options){
	//1:关闭选择产品类别   2:关闭选择单位类别  3:关闭选择银行
	if(options == 1){
		$(".selProCategLay").animate({"opacity":0},function(){$(".selProCategLay").hide();});
		$("#selCategWrap_pro li").removeClass("active");
	}else if(options == 2){
		$(".selCategLay").animate({"opacity":0},function(){$(".selCategLay").hide();});
		$("#selCategWrap_un li").removeClass("active");
	}else if(options == 3){
		$(".selBankLay").animate({"opacity":0},function(){$(".selBankLay").hide();});
		if($(".bankMidWinDiv li > b").length > 0){
			$(".bankMidWinDiv li").removeClass("active");
			$(".bankMidWinDiv li").find("b").remove();
		}
	}
}
//浏览采购单下头部的查询
function changeSearch(options){
	$(".selCondP label").removeClass("active");
	if(options == 1){//根据新增采购单时间查询
		$("#addPurTimSearLab").addClass("active");
		$(".searLayer").animate({"left":599});
		clearOption2();
	}else if(options == 2){//根据采购单号查询
		$("#purNumSearLab").addClass("active");
		$(".searLayer").animate({"left":0});
		inpTipFocBlur("queryPurNum","请输入采购单号","#999","#666");
		clearOption1();
	}
}
//保存选择后的业务单位类别,开户银行
function selCagetBankName(options,objNow,strCon){
	//options 1:选择单位类别  2：选择产品类别   3：选择开户银行
	var objNowHtml = objNow.html();
	if(objNowHtml != "" && objNowHtml != strCon){
		if(options == 1){
			$(".selCategDiv_un p").html($("#nowCateg_unit").html());
			$(".selCategLay").animate({"opacity":0},function(){$(".selCategLay").hide();});
			$("#bcTypeId_add").attr("alt",$("#nowCateg_unit").attr("alt"));
			
		}else if(options == 2){
			$(".selCategDiv_pro p").html($("#nowCateg_pro").html()).attr("alt",$("#nowCateg_pro").attr("alt"));
			$(".selProCategLay").animate({"opacity":0},function(){$(".selProCategLay").hide();});
		}else if(options == 3){
			$(".selBankDiv p").html($("#nowBank").html());
			$(".selBankLay").animate({"opacity":0},function(){$(".selBankLay").hide();});
		}
	}else{
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		if(options == 1){
			$(".alertWin em").html("请选择往来单位类别");
		}else if(options == 2){
			$(".alertWin em").html("请选择产品类别");
		}else if(options == 3){
			$(".alertWin em").html("请选择开户银行");
		}
		calMargLRig($("body"),$(".alertWin"));
		commonTipInfoFn($(".alertWin"));
	}
}
//新增采购单记录
function addNewPurRec(options){
	var bcId = $("#purVal").attr("alt");
	if(bcId == 0){
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("请先选择供应商");
	}else{
		var flag = false;
		if(options == 0){//表示首次进来页面暂无采购记录列表
			flag = true;
		}else{
			if($("#proName").html() == ""){
				flag = false;
			}else{
				flag = true;
			}
		}
		if(flag){
			var strTrTd = "<tr id=nullTr>";
			var oldColor = "";
			var num = $("#purListTable tr").length + 1;
			strTrTd += "<td class='purListWid1' align='center'>"+ num +"</td>";//序号
			strTrTd += "<td class='purListWid5' align='center'></td>";//产品编号
			strTrTd += "<td class='purListWid2' align='center'><p id='proName'></p><i class='iconfont icon-more moreIcon' onclick=showCorrUnProInfDiv(2) title='选择产品'></i></td>";
			strTrTd += "<td class='purListWid3' align='center'></td>";//规格
			strTrTd += "<td class='purListWid7' align='center'></td>";//材质
			strTrTd += "<td class='purListWid4' align='center' ondblclick='editElement(this,0,1)'>0.00</td>";//单价
			strTrTd += "<td class='purListWid4' align='center' ondblclick='editElement(this,0,2)'></td>";//采购数量
			strTrTd += "<td class='purListWid6' align='center'></td>";//基本单位
			strTrTd += "<td class='purListWid4 cAllPrice' align='center'>0.00</td>";//总价
			strTrTd += "<td class='purListWid1' align='center'><i class='iconfont icon-delete deleteIcon' title='删除' onclick=clearCurrPro(this);></i></td>";//删除
			strTrTd += "</tr>";
			num++;
			$("#purListTable").append(strTrTd);
			$("#purListTable tr:odd").addClass("oddBgColor");//增加隔行换色
			checkPurListLen();
		}else{
			
		}
	}
}
//检测新增采购单有无记录
function checkPurListLen(){
	if($(".purListTab tr").length != 0){
		$(".noRecDiv").hide();
		$(".addTrDiv").show();
	}
}
//双击转换可编辑状态
function editElement(obj,idStr,options){
	//dbFlag 为了防止当创建input文本框后用户如果再不断点击就会把input的html传入元素的文本节点中
	//options 1:单价  2：采购数量
    var oldHtml = obj.innerHTML;
    var newObjInp = document.createElement("input");
    if(dbFlag){
        newObjInp.type = "text";
        newObjInp.value = oldHtml;
        newObjInp.className = "comEditInp";
      	//当创建input时清空原有元素的内容
        obj.innerHTML = "";
     	//设置选择文本的内容或设置光标位置（两个参数：start,end；start为开始位置，end为结束位置；如果开始位置和结束位置相同则就是光标位置）
        newObjInp.setSelectionRange(0, oldHtml.length);
    }
    obj.appendChild(newObjInp);
    dbFlag = false;
  	//设置获得光标
    newObjInp.focus();
    newObjInp.onblur = function(){    
    	var purNum_Reg="^[0-9]*[1-9][0-9]*$"; 
    	var price_Reg = /^([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])$/;
    	var purNumInpReg = new RegExp(purNum_Reg).test(newObjInp.value); 
    	var proPriceInpReg = new RegExp(price_Reg).test(newObjInp.value);
    	obj.innerHTML = this.value == oldHtml ? oldHtml : this.value;
    	if(options == 1){//产品单价
    		if(!proPriceInpReg){
    			commonTipInfoFn($(".alertWin"));
        		calMargLRig($("body"),$(".alertWin"));
        		$(".alertWin").addClass("errBg").removeClass("succBg");;
        		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
        		$(".alertWin em").html("产品单价应为大于0的小数或整数");
        		obj.innerHTML = "0.00";
    		}
    	}else if(options == 2){//采购数量
    		if(!purNumInpReg){
    			commonTipInfoFn($(".alertWin"));
        		calMargLRig($("body"),$(".alertWin"));
        		$(".alertWin").addClass("errBg").removeClass("succBg");;
        		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
        		$(".alertWin em").html("采购数量应为大于0的正整数");
        		obj.innerHTML = "0";
    		}
    	}
    	dbFlag = true;
    	var price = parseFloat($("#td_price_"+idStr).html());
    	$("#td_all_price_"+idStr).html((price * parseInt($("#td_num_"+idStr).html())).toFixed(2));
    	var allPrice = 0;
    	$(".cAllPrice").each(function(i){
    		allPrice += parseFloat($(".cAllPrice").eq(i).html());
    	});
    	$("#totaMoney").html(allPrice.toFixed(2));
    };
}
//采购付 财务付 模拟radio
function selPayPeoCategSty(obj,hideInp){
	$(obj).each(function(i){
		$(this).on("click",function(){
			$(hideInp).val($(this).val());
			$(this).attr("checked",true);
			$(this).parent("label").addClass("active").append("<i class='iconfont icon-duihao'></i>").siblings().removeClass("active").find('i').remove();
		});
	});
}

//获取单位类别/产品类别列表
function getCommonType(option){
	var content = "";
	var urlStr = "";
	var txtContent = "";
	var li_txt = "";
	var ul_tag = "";
	var div_tag = "";
	if(option == "bType"){//获取往来单位类别
		urlStr = "bizcontact.do?action=listBizType";
		txtContent = "暂无单位类别，请添加";
		li_txt = "b";
		ul_tag = "categDataUlPur";
		div_tag = "categDataDivPur";
	}else if(option == "pType"){//获取产品类别
		urlStr = "producttype.do?action=listProductType";
		txtContent = "暂无产品类别，请添加";
		li_txt = "p";
		ul_tag = "categDataUlPro";
		div_tag = "categDataDivPro";
	}else if(option == "selBtype"){//增加往来单位中选择单位类别
		urlStr = "bizcontact.do?action=listBizType";
		txtContent = "暂无单位类别，请添加";
		ul_tag = "selCategUl_un";
	}
	$.ajax({
        type:"post",
        async:false,
        dataType:"json",
        url:urlStr,
        success:function (json){
        	if(json != null){
        		if(option == "bType"){
        			for(var i = 0 ; i < json.length ; i++){
            			content += "<li id='li_"+li_txt+"_"+json[i].id+"'><span></span><i class='iconfont icon-mingpian cardIcon'></i><p onclick=queryBusinessList(this,"+json[i].id+")>"+json[i].btName+"</p></li>";
            		}
        		}else if(option == "pType"){
        			for(var i = 0 ; i < json.length ; i++){
            			content += "<li id='li_"+li_txt+"_"+json[i].id+"'><span></span><i class='iconfont icon-mingpian cardIcon'></i><p onclick=showProductList(this,"+json[i].id+")>"+json[i].typeName+"</p></li>";
            		}
        		}else if(option == "selBtype"){
        			for(var i = 0 ; i < json.length ; i++){
        				content += "<li onclick=selectBsTypeInfo('"+json[i].id+"');>"+json[i].btName+"</li>";
        			}
        		}
        		$("#"+ul_tag).html(content);
        	}else{
        		if(option == "selBtype"){
        			$("#selCategWrap_un").html("<div class='noRecCon'><i class='iconfont icon-noListRec noListRec_1'></i><span>暂无单位类别，请添加</span></div>");
        		}else{
        			$("#"+div_tag).html("<div class='noRecCon'><i class='iconfont icon-noListRec noListRec'></i><p>"+txtContent+"</p></div>");
        		}
        	}
        }
    });
}

//自动生成采购订单编号
function autoCreatePurOrder(){
	var purOrderNum = "";
	$.ajax({
		type:"post",
	    async:false,
	    dataType:"json",
	    url:"purchase.do?action=getPoNum",
	    success:function (json){
	    	purOrderNum = json["result"];
	    }
	});
	return purOrderNum;
}
//添加单位类别
function addBsType(){
	var typeName = $("#typeName_add").val().replace(/\s+/g, "");
	var remark = $("#typeRemark_add").val().replace(/\s+/g, "");
	if(typeName == ""){
		$("#categNameDiv").show();
		$("#cateNameInfo").html("类别名称不能为空");
	}else if(typeName.length >= 8){
		$("#categNameDiv").show();
		$("#cateNameInfo").html("类别名称长度不能超过8位");
	}else{
		if(checkExistBsType("typeName_add")){
			$("#categNameDiv").show();
			$("#cateNameInfo").html("该类别已存在");
		}else{
			$("#categNameDiv").hide();
			$("#cateNameInfo").html("");
			$.ajax({
				type:"post",
			    async:false,
			    dataType:"json",
			    data:{btName:escape(typeName),btRemark:escape(remark)},
			    url:"bizcontact.do?action=addBizType",
			    success:function (json){
			    	if(json==true){
						//alert("保存成功！");
						calMargLRig($("body"),$(".alertWin"));
						$(".alertWin").addClass("succBg").removeClass("errBg");
		        		$(".alertWin i").addClass("icon-smile smileIcon").removeClass("icon-cry cryIcon");
		        		$(".alertWin em").html("保存成功");
		        		commonTipInfoFn($(".alertWin"),function(){
		        			comCancelAdd(1);
							//刷新往来单位类别列表
							getCommonType("bType");
						});
					}else{
						//alert("保存失败，请重试！");
						commonTipInfoFn($(".alertWin"));
			    		calMargLRig($("body"),$(".alertWin"));
			    		$(".alertWin").addClass("errBg").removeClass("succBg");;
			    		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
			    		$(".alertWin em").html("保存失败，请重试");
					}
			    }
			});
		}
	}
}
//选择往来单位动作
function selectBsTypeInfo(btId){
	$("#nowCateg_unit").attr("alt",btId);
}
//增加往来单位
function addBizContact(){
	var bcName = $("#bcName_add").val().replace(/\s+/g, ""); 
	var bcTypeID = $("#bcTypeId_add").attr("alt").replace(/\s+/g, ""); 
	var bcPy = $("#bcPyCode_add").val().replace(/\s+/g, ""); 
	var bcAddress = $("#bcAddress_add").val().replace(/\s+/g, ""); 
	var bcContact =$("#bContact_add").val().replace(/\s+/g, ""); 
	var bcTel = $("#bcTel_add").val().replace(/\s+/g, ""); 
	var bcMobile = $("#bcMobile_add").val().replace(/\s+/g, ""); 
	var bcFax =$("#bcFax_add").val().replace(/\s+/g, ""); 
	var bcEmail = $("#bcEmail_add").val().replace(/\s+/g, ""); 
	var bcBankName = $("#bcBankName_add").text().replace(/\s+/g, ""); 
	var bcBankNo = $("#bankAcc").val().replace(/\s+/g, ""); 
	var bcNameFlag = false;
	var bcTypeFlag = false;
	var bcContactFlag = false;
	var bcTelFlag = false;
	var bcMobileFlag = false;
	var bcFaxFlag = false;
	var bcBankFlag = false;
	var bcEmailFlag = false;
	if(bcName == ""){
		$("#compNameDiv").show();
		$("#bcNameInfo").html("单位名称不能为空");
	}else{
		if(checkExistBc("bcName_add")){
			$("#compNameDiv").show();
			$("#bcNameInfo").html("已存在该单位");
			bcNameFlag = false;
		}else{
			$("#compNameDiv").hide();
			bcNameFlag = true;
		}
	}
	if(bcTypeID == "0"){
		$("#compCategDiv").show();
		$("#bcTypeIdInfo").html("单位类别不能为空");
	}else{
		$("#compCategDiv").hide();
		bcTypeFlag = true;
	}
	if(bcContact == ""){
		$("#compContDiv").show();
		$("#bContactInfo").html("单位联系人不能为空");
	}else if(checkInputStr(bcContact,"xm")){
		$("#compContDiv").show();
		$("#bContactInfo").html("单位联系人必须为2-8位中文");
	}else{
		$("#compContDiv").hide();
		bcContactFlag = true;
	}
	if(bcTel != ""){
		if(checkInputStr(bcTel,"tel")){
			$("#compTelDiv").show();
			$("#bcTelInfo").html("单位联系电话格式错误");
		}else{
			$("#compTelDiv").hide();
			bcTelFlag = true;
		}
	}else{
		$("#compTelDiv").hide();
		bcTelFlag = true;
	}
	if(bcMobile != ""){
		if(checkInputStr(bcMobile,"mobile")){
			$("#compPhoneDiv").show();
			$("#bcMobileInfo").html("单位联系手机格式错误");
		}else{
			$("#compPhoneDiv").hide();
			bcMobileFlag = true;
		}
	}else{
		$("#compPhoneDiv").hide();
		bcMobileFlag = true;
	}
	if(bcFax != ""){
		if(checkInputStr(bcFax,"tel")){
			$("#compFaxDiv").show();
			$("#bcFaxInfo").html("单位传真格式错误");
		}else{
			$("#compFaxDiv").hide();
			bcFaxFlag = true;
		}
	}else{
		$("#compFaxDiv").hide();
		bcFaxFlag = true;
	}
	if(bcBankName != "" && bcBankNo == ""){
		$("#compBankNaDiv").hide();
		$("#compBankNum").show();
		$("#bcBankNumInfo").html("银行卡号不能为空");
	}else if(bcBankName == "" && bcBankNo != ""){
		$("#compBankNum").hide();
		$("#compBankNaDiv").show();
		$("#bcBankNameInfo").html("开户银行不能为空");
	}else{
		$("#compBankNum").hide();
		$("#compBankNaDiv").hide();
		bcBankFlag = true;
	}
	if(bcEmail != ""){
		if(checkInputStr(bcEmail,"email")){
			$("#compEmailDiv").show();
			$("#bcEmailInfo").html("单位电子邮箱格式错误");
		}else{
			$("#compEmailDiv").hide();
			bcEmailFlag = true;
		}
	}else{
		$("#compEmailDiv").hide();
		bcEmailFlag = true;
	}
	if(bcNameFlag && bcTypeFlag && bcContactFlag && bcTelFlag && bcMobileFlag && bcFaxFlag && bcBankFlag && bcEmailFlag){
		$.ajax({
			type:"post",
		    async:false,
		    dataType:"json",
		    data:{bcName:escape(bcName),bcPy:bcPy,bcTypeID:bcTypeID,bcAddress:escape(bcAddress),bcContact:escape(bcContact),bcTel:bcTel,bcMobile:bcMobile,
		    	bcFax:bcFax,bcEmail:bcEmail,bcBankName:escape(bcBankName),bcBankNo:bcBankNo},
		    url:"bizcontact.do?action=addBizContact",
		    success:function (json){
		    	if(json){
		    		//alert("保存成功!");
		    		calMargLRig($("body"),$(".alertWin"));
		    		$(".alertWin").addClass("succBg").removeClass("errBg");
	        		$(".alertWin i").addClass("icon-smile smileIcon").removeClass("icon-cry cryIcon");
	        		$(".alertWin em").html("保存成功");
	        		commonTipInfoFn($(".alertWin"),function(){
	        			comCancelAdd(2);
					});
		    	}else{
		    		//alert("保存失败");
		    		commonTipInfoFn($(".alertWin"));
		    		calMargLRig($("body"),$(".alertWin"));
		    		$(".alertWin").addClass("errBg").removeClass("succBg");;
		    		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		    		$(".alertWin em").html("保存失败");
		    	}
		    }
		});
	}
}
//清空添加往来单位的信息
function clearAddBcInfo(){
	$("#bcName_add").val(""); 
	$("#bcTypeId_add").attr("alt","0"); 
	$("#bcTypeId_add").text("");
	$("#bcPyCode_add").val(""); 
	$("#bcAddress_add").val(""); 
	$("#bContact_add").val(""); 
	$("#bcTel_add").val(""); 
	$("#bcMobile_add").val(""); 
	$("#bcFax_add").val(""); 
	$("#bcEmail_add").val(""); 
	$("#bcBankName_add").text(""); 
	$("#bankAcc").val(""); 
	$("#compNameDiv").hide();
	$("#compCategDiv").hide();
	$("#compContDiv").hide();
	$("#compTelDiv").hide();
	$("#compPhoneDiv").hide();
	$("#compFaxDiv").hide();
	$("#compBankNum").hide();
	$("#compBankNaDiv").hide();
	$("#compEmailDiv").hide();
}
//清空添加单位类别信息
function clearAddBtInfo(){
	$("#typeName_add").val("");
	$("#typeRemark_add").val("");
	$("#categNameDiv").hide();
}
//自动创建拼音码
function autoAddPyCode(){
	var bcName = $("#bcName_add").val().replace(/\s+/g, ""); 
	if(bcName != ""){
		$.ajax({
			type:"post",
		    async:false,
		    dataType:"json",
		    data:{bcName:escape(bcName)},
		    url:"bizcontact.do?action=getPinyinCode",
		    success:function (json){
		    	$("#bcPyCode_add").val(json);
		    }
		});
	}
}
//清空添加产品类别DIV数据
function clearAddProTypeInfo(){
	$("#proTypeName");
}
//单击行选择复选框事件
function selPro(index){
	if($("#"+index).is(":checked")){
		$("#"+index).attr("checked",false);
		$("#"+index).parent().find("i").remove();
		$("#"+index).parent().parent().parent().removeClass("oddBgColor1");
	}else{
		$("#"+index).attr("checked",true);
		$("#"+index).parent().append("<i class='iconfont icon-duihao choiceAct'></i>");
		$("#"+index).parent().parent().parent().addClass("oddBgColor1");
	}
}
//选择产品下的全选
function selectAllPro(){
	if(!$("#selAllPro").is(":checked")){
		$("#selAllPro").attr("checked",false);
		$(".selAllLab").find("i").remove();
		$("#dataListTab_pro tr input").attr("checked",false);
		$("#dataListTab_pro tr i").remove();
		$("#dataListTab_pro tr").removeClass("oddBgColor1");
		$(".selAllTxt").html("全选");
	}else{
		$("#selAllPro").attr("checked",true);
		$(".selAllLab").append("<i class='iconfont icon-duihao choiceAct'></i>");
		$("#dataListTab_pro tr input").attr("checked",true);
		if($("#dataListTab_pro tr i").length > 0){
			$("#dataListTab_pro tr i").remove();
		}
		$("#dataListTab_pro tr input").parent().append("<i class='iconfont icon-duihao choiceAct'></i>");
		$("#dataListTab_pro tr").addClass("oddBgColor1");
		$(".selAllTxt").html("取消");
	}
}
//将选择的产品插入采购订单列表中
function insertProList(){
	var obj = $("input[name='proId']:checked"); 
	var selecProInfo = "";
	for(var i = 0; i < obj.length; i++){ 
		selecProInfo += obj[i].value + ":";
	}
	if(selecProInfo != ""){
		selecProInfo = selecProInfo.substring(0,selecProInfo.length - 1);
	}
	closeAlertWin($(".proInfoDiv"),"selPro");
	//将选择的产品编号插入采购订单列表中
	$("#nullTr").remove();
	var num = $("#purListTable tr").length + 1;
	var proArray = selecProInfo.split(":");
	for(var i = 0 ; i < proArray.length ; i++){
		var strTrTd = "<tr>";
		var oldColor = "";
		var proInfo = proArray[i].split(",");
		strTrTd += "<td class='purListWid1' align='center'>"+ num++ +"</td>";//序号
		strTrTd += "<td class='purListWid5' align='center'>"+proInfo[1]+"</td>";//产品编号
		strTrTd += "<td class='purListWid2' align='center'><p id='proName_"+proInfo[0]+"' class='proIdClass' alt='"+proInfo[0]+"'>"+proInfo[2]+"</p><i class='iconfont icon-more moreIcon' onclick='showCorrUnProInfDiv(2)' title='选择产品'></i></td>";
		strTrTd += "<td class='purListWid3' align='center'>"+proInfo[3]+"</td>";//规格
		strTrTd += "<td class='purListWid7' align='center'>"+proInfo[4]+"</td>";//材质
		strTrTd += "<td id='td_price_"+proInfo[0]+"' class='purListWid4 proPriceClass' align='center' ondblclick=editElement(this,'"+proInfo[0]+"',1)>"+proInfo[5]+"</td>";//单价
		strTrTd += "<td id='td_num_"+proInfo[0]+"' class='purListWid4 proNumClass' align='center' ondblclick=editElement(this,'"+proInfo[0]+"',2)>0</td>";//采购数量
		strTrTd += "<td class='purListWid6' align='center'>"+proInfo[6]+"</td>";//基本单位
		strTrTd += "<td id='td_all_price_"+proInfo[0]+"' class='purListWid4 cAllPrice' align='center'>0.00 </td>";//总价
		strTrTd += "<td class='purListWid1' align='center'><i class='iconfont icon-delete deleteIcon' title='删除' onclick=clearCurrPro(this);></i></td>";//删除
		strTrTd += "</tr>";
		$("#purListTable").append(strTrTd);
		$("#purListTable tr:odd").addClass("oddBgColor");//增加隔行换色
	}
}
//删除产品
function clearCurrPro(obj){
	$(obj).parent().parent().remove();
	//重新统计总金额
	var allPrice = 0;
	$(".cAllPrice").each(function(i){
		allPrice += parseFloat($(".cAllPrice").eq(i).html());
	});
	$("#totaMoney").html(allPrice.toFixed(2));
	$("#purListTable tr").each(function(){
		$("#purListTable tr").removeClass("oddBgColor");
		$("#purListTable tr:odd").addClass("oddBgColor");
	});
}
//提交采购订单
function addPurOrder(){
	var bcId = $("#purVal").attr("alt");//供应商编号
	var totalMoney = $("#totaMoney").html();//采购总价
	var payOption = $("#payStatusInp").val().replace(/\s+/g, "");//付款人
	var payStatus = -2;//财务未付款
	var num = $("#purListTable tr").length;//采购产品记录条数
	var allPrice_tr_flag = true;
	var proIdStr = "";
	var proPriceStr = "";
	var proNumStr = "";
	$(".cAllPrice").each(function(i){
		if($(".cAllPrice").eq(i).html() == 0.00){
			allPrice_tr_flag = false;
			return false;
		}
	});
	if(payOption == 1){//采购付款
		payStatus = 2;
	}else if(payOption == 2){//财务付
		payStatus = -1;
	}
	if(bcId == 0){
		//alert("请选择供应商");
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("请先选择供应商");
	}else if(num == 0){
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("采购记录不能为空");
	}else if(!allPrice_tr_flag){
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("请填写产品完整信息");
	}else if(payStatus == -2){
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("请选择付款人");
	}else{
		$(".proIdClass").each(function(i){
			proIdStr += $(".proIdClass").eq(i).attr("alt")+",";
		});
		proIdStr = proIdStr.substring(0,proIdStr.length - 1);
		$(".proPriceClass").each(function(i){
			proPriceStr += $(".proPriceClass").eq(i).html()+",";
		});
		proPriceStr = proPriceStr.substring(0,proPriceStr.length - 1);
		$(".proNumClass").each(function(i){
			proNumStr += $(".proNumClass").eq(i).html()+",";
		});
		proNumStr = proNumStr.substring(0,proNumStr.length - 1);
		var posStr = proIdStr + ":" + proPriceStr + ":" + proNumStr;//采购订单详情列表(格式为商品编号,单价,采购数量 )
		//获取采购订单中详细数据信息
		$.ajax({
			type:"post",
			async:false,
			dataType:"json",
			data:{bId:bcId,pTotalMoney:totalMoney,payStatus:payStatus,posStr:posStr},
			url:"purchase.do?action=addPurchaseOrder",
			success:function(json){
				if(json["result"] == "succ"){
					//alert("增加采购订单成功!");
					calMargLRig($("body"),$(".alertWin"));
	        		$(".alertWin").addClass("succBg").removeClass("errBg");
	        		$(".alertWin i").addClass("icon-smile smileIcon").removeClass("icon-cry cryIcon");
	        		$(".alertWin em").html("增加采购订单成功");
	        		commonTipInfoFn($(".alertWin"),function(){
	        			window.location.reload();
					});
				}else if(json["result"] == "fail"){
					//alert("增加采购订单失败!");
					commonTipInfoFn($(".alertWin"));
					calMargLRig($("body"),$(".alertWin"));
					$(".alertWin").addClass("errBg").removeClass("succBg");
					$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
					$(".alertWin em").html("增加采购订单失败");
				}else if(json["result"] == "noAbility"){
					//alert("您无权执行此操作!");
					commonTipInfoFn($(".alertWin"));
					calMargLRig($("body"),$(".alertWin"));
					$(".alertWin").addClass("errBg").removeClass("succBg");;
					$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");;
					$(".alertWin em").html("您无权执行此操作");
				}
			}
		});
	}
}
//添加产品
function addPro(){
   var proName =  $("#proName_add").val().replace(/\s+/g, "");
   var ptID=  $("#proTypeId_add").attr("alt").replace(/\s+/g, "");
   var pro_no=  $("#proCode_add").val().replace(/\s+/g, "");
   var pro_spec=  $("#proFormatInfo_add").val().replace(/\s+/g, "");
   var pro_unit=  $("#proUnit_add").val().replace(/\s+/g, "");
   var pro_cz=  $("#proMater_add").val().replace(/\s+/g, "");
   var pro_remark=  $("#proRemark_add").val().replace(/\s+/g, "");
   var pt_type = $("#categStyInp").val().replace(/\s+/g, "");
   var proNameFlag = false;
   var proTypeFlag = false;
   var proNoFlag = false;
   var proUnitFlag = false;
   var proSpecFlag = false;
   var proCzFlag = false;
   var ptTypeFlag = false;
   if(proName == ""){
	   $("#proName_add_tips").html("产品名称不能为空");
	   $("#proNameDiv").show();
   }else{
	   if(checkExistByName("proName_add","pro")){
		   $("#proName_add_tips").html("已存在该产品");
		   $("#proNameDiv").show();
	   }else{
		   proNameFlag = true;
		   $("#proNameDiv").hide(); 
	   }
   }
   if(ptID == 0){
	   $("#proTypeId_add_tips").html("产品类别不能为空");
	   $("#proCategDiv").show();
   }else{
	   proTypeFlag = true;
	   $("#proCategDiv").hide();
   }
   if(pro_no == ""){
	   $("#proCode_add_tips").html("产品编码不能为空");
	   $("#proCodeDiv").show();
   }else{
	   proNoFlag = true;
	   $("#proCodeDiv").hide();
   }
   if(pro_spec == ""){
	   $("#proFormatInfo_add_tips").html("产品规格不能为空");
	   $("#proFormatDiv").show();
   }else{
	   proSpecFlag = true;
	   $("#proFormatDiv").hide();
   }
   if(pro_unit == ""){
	   $("#proUnit_add_tips").html("基本单位不能为空");
	   $("#basicUnit").show();
   }else{
	   proUnitFlag = true;
	   $("#basicUnit").hide();
   }
   if(pro_cz == ""){
	   $("#proMater_add_tips").html("材质要求不能为空");
	   $("#materReqDiv").show();
   }else{
	   proCzFlag = true;
	   $("#materReqDiv").hide();
   }
   if(pt_type == ""){
	   $("#categStyInp_tips").html("类别类型不能为空");
	   $("#proCategStyDiv").show();
   }else{
	   ptTypeFlag = true;
	   $("#proCategStyDiv").hide();
   }
   if(proNameFlag && proTypeFlag && proNoFlag && proSpecFlag && proUnitFlag && proCzFlag && ptTypeFlag){
	   $.ajax({
			type:"post",
			async:false,
			dataType:"json",
			data:{proName:escape(proName),ptID:ptID,pro_no:pro_no,pro_spec:escape(pro_spec),pro_unit:escape(pro_unit),
				pro_cz:escape(pro_cz),pro_remark:escape(pro_remark),pt_type:pt_type},
			url:"productInfo.do?action=addProduct",
			success:function(json){
				if(json==true){
					calMargLRig($("body"),$(".alertWin"));
					$(".alertWin").addClass("succBg").removeClass("errBg");
	        		$(".alertWin i").addClass("icon-smile smileIcon").removeClass("icon-cry cryIcon");
	        		$(".alertWin em").html("保存成功");
	        		commonTipInfoFn($(".alertWin"),function(){
	        			comCancelAdd(4);
					});
				}else{
					commonTipInfoFn($(".alertWin"));
	        		calMargLRig($("body"),$(".alertWin"));
	        		$(".alertWin").addClass("errBg").removeClass("succBg");;
	        		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
	        		$(".alertWin em").html("保存失败，请重试");
				}
			}
		});
   }
}
//获取产品类别
function getProType(){
	$.ajax({
		type:"post",
		async:false,
		dataType:"json",
		url:"producttype.do?action=listProductType",
		success:function(json){
			if(json == ""){
				$("#selCategWrap_pro").html("<div class='noRecCon'><i class='iconfont icon-noListRec noListRec_1'></i><span>暂无产品类别，请添加</span></div>");
			}else{
				var content = "";
				$.each(json, function(row, obj) {
					var ptId = obj.id;
					var ptName = obj.typeName;
					content+="<li onclick=selProType('"+ptId+"','"+ptName+"');>"+ptName+"</div>";
				});
				$("#selCategUl_pro").html(content);
			}
		}
	});
}
//选择产品类别
function selProType(ptId,ptName){
	$("#nowCateg_pro").html(ptName).attr("alt",ptId);
	
}
//清空添加产品的数据
function clearAllAddProInfo(){
	$("#proName_add").val("");
	$("#proTypeId_add").attr("alt","").html("");
	$("#nowCateg_pro").attr("alt","").html("");
	$("#proCode_add").val("");
	$("#proFormatInfo_add").val("");
	$("#proUnit_add").val("");
	$("#proMater_add").val("");
	$("#proRemark_add").val("");
	$("#categStyInp").val("");
	$("#proNameDiv").hide();
	$("#proCategDiv").hide();
	$("#proCodeDiv").hide();
	$("#proFormatDiv").hide();
	$("#basicUnit").hide();
	$("#materReqDiv").hide();
	$("#proCategStyDiv").hide();
	$(".comCategStyInp").each(function(i){
		if($(".comCategStyInp").eq(i).is(":checked")){
			$(".comCategStyInp").eq(i).attr("checked",false);
			$(".comCategStyInp").eq(i).parent().removeClass("active");
			$(".comCategStyInp").eq(i).parent().find("i").remove();
		}
	});
}
//清空查询条件1
function clearOption1(){
	$("#sTime").val("").attr("placeholder","请选择开始时间");
	$("#eTime").val("").attr("placeholder","请选择结束时间");
	$(".comStrogStaInp").each(function(i){
		if($(".comStrogStaInp").eq(i).is(":checked")){
			$(".comStrogStaInp").eq(i).attr("checked",false);
			$(".comStrogStaInp").eq(i).parent().removeClass("active");
			$(".comStrogStaInp").eq(i).parent().find("i").remove();
		}
	});
	$("#storgStatInp").val("-1");
	$(".payStaInput").each(function(i){
		if($(".payStaInput").eq(i).is(":checked")){
			$(".payStaInput").eq(i).attr("checked",false);
			$(".payStaInput").eq(i).parent().removeClass("active");
			$(".payStaInput").eq(i).parent().find("i").remove();
		}
	});
	$("#payStatInp").val("-2");
}
//清空查询条件2
function clearOption2(){
	$("#queryPurNum").val("请输入采购单号");
	$("#sTime").val("${requestScope.sTime}");
	$("#eTime").val("${requestScope.eTime}");
}
//查询订单(0:初始查询,1：组合条件查询,2:采购单号查询)
function queryOrder(status){	
	if(status == 0){//初始查询
		clearOption1();
		clearOption2();
	}
	sTime_a = $("#sTime").val().replace(/\s+/g, "");
	eTime_a = $("#eTime").val().replace(/\s+/g, "");
	if(sTime_a > eTime_a){
		//alert("采购时间选择错误");
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("采购时间选择错误");
	}else{
		inStatus_a = $("#storgStatInp").val().replace(/\s+/g, "");
		payStatus_a = $("#payStatInp").val().replace(/\s+/g, "");
		purOrder_a = $("#queryPurNum").val().replace(/\s+/g, "");
		option_a = status;
		if(purOrder_a == "请输入采购单号"){
			purOrder_a = "";
		}
		var allCount = getPurOrderCount();//全部
	    $("#Pagination_pur").pagination(allCount, {
	        callback: pageselectCallback_pur,  //PageCallback() 为翻页调用次函数。
	        prev_text: "上一页",
	        next_text: "下一页 ",
	        items_per_page:pageSize,
	        current_page:page_index_pur,
	        ellipse_text:"...",
	        num_edge_entries: 2,       //两侧首尾分页条目数
	        num_display_entries: 6	//连续分页主体部分分页条目数
	    });
	    $("#Pagination_pur").css({
	   	 	"left":parseInt(($("#purTurnPage").width() - $("#Pagination_pur").width())/2),
	   	 	"top":0
	    });
	}
}
//根据查询条件获取采购单记录数(option="init"时表示初始查询)
function getPurOrderCount(){
	var count = 0;
	$.ajax({
		type:"post",
		async:false,
		dataType:"json",
		data:{sTime:sTime_a,eTime:eTime_a,inStatus:inStatus_a,payStatus:payStatus_a,purOrder:purOrder_a,option:option_a},
		url:"purchase.do?action=getPurchaseOrderCount",
		success:function(json){
			count = json["result"];
		}
	});
	return count;
}
//根据查询条件分页获取采购单记录列表(option="init"时表示初始查询)
function getPurOrderList(pageNo,pageSize){
	$.ajax({
		type:"post",
		async:false,
		dataType:"json",
		data:{sTime:sTime_a,eTime:eTime_a,inStatus:inStatus_a,payStatus:payStatus_a,purOrder:purOrder_a,option:option_a,pageNo:pageNo,pageSize:pageSize},
		url:"purchase.do?action=getPurchaseOrderPageInfo",
		success:function(json){
			if(json["result"].length > 0){
				$("#Pagination_pur").show();
				var content = "";
				for(var i = 0 ; i < json["result"].length ; i++){
					content += "<li class=mainLi>";
					content += "<div id='payRecordDiv_"+json["result"][i].po.id+"' class='mainBox'>";
					content += "<h3><span>采购单 Purchasing Order</span><em>制单日期："+getLocalDate(json["result"][i].po.purDate)+"</em></h3>";
					content += "<div class=purTitDiv>";
					content += "<p class=purName>TO："+json["result"][i].po.businessContactInfo.bcName+"</p>";
					content += "<p class=purOrdNa>FROM："+json["result"][i].po.userInfo.userName+"</p>";
					content += "<p class=purOrdNum>采购编号："+json["result"][i].po.purONo+"</p>";
					content += "</div>";
					//获取采购订单详细信息列表
					var posObj = json["result"][i].posList;
					content += "<ul class='purOrdLisTit clearfix'>";
					content += "<li class=listLiWid1>编号</li>";
					content += "<li class=listLiWid2>物料名称</li>";
					content += "<li class=listLiWid3>材质</li>";
					content += "<li class=listLiWid4>规格</li>";
					content += "<li class=listLiWid3>数量</li>";
					content += "<li class=listLiWid3>单价(元)</li>";
					content += "<li class='listLiWid3 noBorLi'>总价(元)</li>";
					content += "</ul>";
					var count = 1;
					for(var j = 0 ; j < posObj.length ; j++){
						content += "<ul class='purOrdLisCon clearfix'>";
						content += "<li class=listLiWid1>"+count+"</li>";
						content += "<li class=listLiWid2>"+posObj[j].productInfo.proName+"</li>";
						content += "<li class=listLiWid3>"+posObj[j].productInfo.proCz+"</li>";
						content += "<li class=listLiWid4>"+posObj[j].productInfo.proSpec+"</li>";
						content += "<li class=listLiWid3>"+posObj[j].proNumber+"</li>";
						content += "<li class=listLiWid3>"+posObj[j].proPrice+"</li>";
						content += "<li class='listLiWid3 noBorLi'>"+posObj[j].proTotalMoney+"</li>";
						content += "</ul>";
						count++;
					}
					content += "<div class=purOrdBotDiv>";
					var inStatus = json["result"][i].po.status;
					var payStatus = json["result"][i].po.payStatus;
					var inStatusTxt = "";
					var payStatusTxt = "";
					if(inStatus == 0){
						inStatusTxt = "采购中";
					}else if(inStatus == 1){
						inStatusTxt = "部分入库";
					}else if(inStatus == 2){
						inStatusTxt = "全部入库";
					}
					if(payStatus == -1){
						payStatusTxt = "未付款";
					}else if(payStatus == 0){
						payStatusTxt = "未付清";
					}else if(payStatus == 1){
						payStatusTxt = "财务已付";
					}else if(payStatus == 2){
						payStatusTxt = "采购已付未报账";
					}else if(payStatus == 3){
						payStatusTxt = "采购已付已报账";
					}
					
					content += "<p class=storgStaP>入库状态："+inStatusTxt+"</p>";
					content += "<p class=storgStaP>付款状态："+payStatusTxt+"</p>";
					if(roleName == "财务"){
						var totalMoney = json["result"][i].po.purTotalMoney;
						var payedMoney = json["result"][i].po.purRealMoney;
						//<!-- 未付款状态下的付款按钮  -->
						if(payStatus == -1 || payStatus == 0){
							content += "<a class=finPayBtn href=javascript:void(0) onclick=goPay('"+json["result"][i].po.id+"','"+json["result"][i].po.purONo+"',"+totalMoney+","+payedMoney+","+payStatus+")>去付款</a>";
						}else if(payStatus == 2){
							//<!-- 未报账状态下的去报账按钮  -->
							content += "<a class=finAccPayBtn href=javascript:void(0) onclick=goReimbursement('"+json["result"][i].po.id+"',"+inStatus+");>去报账</a>";
						}
					}
					content += "</div>";
					content += "<div class=purOrdBotDiv1>";
					content += "<p class=actualPay>";
					content += "<span>实付金额："+json["result"][i].po.purRealMoney+"元</span>";
					content += "<i class='iconfont icon-payHistory viewPayHisIcon' title=查看付款记录 onclick=showPayHistory('"+json["result"][i].po.id+"');></i>";
					content += "<p>";
					content += "<p>总金额："+json["result"][i].po.purTotalMoney+"元</p>";
					content += "</div>";
					content += "<div id='payHisLayerDiv_"+json["result"][i].po.id+"' class=payHisLayer>";
					content += "<div class=payHisTit>";
					content += "<p class=payHisNum>采购单编号："+json["result"][i].po.purONo+"</p>";
					content += "<p class=payHisAcc>实付金额："+json["result"][i].po.purRealMoney+"元</p>";
					content += "</div>";
					content += "<p class=payHisLisTit>";
					content += "<span>付款时间</span>";
					content += "<span>付款金额(元)</span>";
					content += "<span>付款备注</span>";
					content += "</p>";
					content += "<div id=payHisListDiv_"+json["result"][i].po.id+" class=comPayHisDiv>";
					//content += "<ul id=payHisListUl_"+json["result"][i].po.id+"></ul>";
					
					content += "<ul id=payHisListUl_"+json["result"][i].po.id+">";
					//获取采购订单详细信息列表
					var ppObj = json["result"][i].ppList;
					for(var k = 0 ; k < ppObj.length ; k++){
						var payOption = ppObj[k].payOption;
						if(payOption == "cgp"){
							payOption = "采购付款";
						}else{
							payOption = "财务付款";
						}
						content += "<li><p>"+getLocalDate(ppObj[k].payDate)+"</p><p>"+ppObj[k].payMoney+"</p><p>"+payOption+"</p></li>";
					}
					content += "<ul>";
					
					content += "</div>";
					content += "<div class=closePayLayDiv><i class='iconfont icon-guanbi payHisClose' title=关闭  onclick=closePayLayDiv("+json["result"][i].po.id+")></i></div>";
					content += "</div>";
					content += "</div>";
					content += "</li>";
				}
				$("#purOrdUl").html(content);
				waterFall("purOrdUl","mainLi");
			}else{
				$("#Pagination_pur").hide();
				$("#purOrdUl").html("<div class='noRecCon'><i class='iconfont icon-noListRec noListRec_1'></i><span>暂无采购订单记录</span></div>");
			}
		}
	});
}
//显示出列表数据
function pageselectCallback_pur(page_index_pur,jq){
	getPurOrderList(page_index_pur+1,pageSize);
}
//关闭付款记录窗口
function closePayLayDiv(poId){
	$("#payHisLayerDiv_"+poId).hide();
}
//关闭去付款窗口
function closePayWindow(){
	$(".layer").hide();
	$(".goPayDiv").hide();
	$("#currPayMoney").val("");
	//刷新订单列表数据
	queryOrder(option_a);
}
//去付款
function goPay(poId,poNum,allMoney,payedMoney,payStatus){
	if(roleName == "财务"){
		if(payStatus == -1 || payStatus == 0){//只有未付款或者未付清才能进行付款
			var noPayMoney = toDecimal(parseFloat(allMoney) - parseFloat(payedMoney));
			$("#allMoney").html(allMoney);
			$("#payedMoney").html(payedMoney);
			$("#noPayedMoney").html(noPayMoney);
			$("#poId_pay").val(poId);
			$("#winInfo").html("付款窗口(订单编号："+poNum+")");
			$(".layer").show();
			$(".goPayDiv").show();
		}else{
			//alert("订单状态为未付款或者未付清，才能进行付款操作");
			commonTipInfoFn($(".alertWin"));
    		calMargLRig($("body"),$(".alertWin"));
    		$(".alertWin").addClass("errBg").removeClass("succBg");;
    		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
    		$(".alertWin em").html("订单状态为未付款或者未付清时才能进行付款操作");
		}
	}else{
		//alert("您无权执行此操作!");
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("您无权执行此操作");
	}
}
//付款
function payMoney(){
	var poId = $("#poId_pay").val();
	var noPayMoney = $("#noPayedMoney").html();
	var currPayMoney = $("#currPayMoney").val();
	if(currPayMoney == ""){
		$(".goPayTipInfo").show();
		$("#payTipInfo").html("请输入当前打款金额!");
	}else if(!checkInputNumberOrFloat(currPayMoney)){
		$(".goPayTipInfo").show();
		$("#payTipInfo").html("打款金额只能是正整数或两位以内的小数!");
	}else if(parseFloat(currPayMoney) > parseFloat(noPayMoney)){
		$(".goPayTipInfo").show();
		$("#payTipInfo").html("打款金额不能大于应付金额!");
	}else{
		$(".goPayTipInfo").hide();
		//增加付款记录并修改订单实际付款总额、付款状态
		$.ajax({
			type:"post",
			async:false,
			dataType:"json",
			data:{poId:poId,currPayMoney:currPayMoney},
			url:"purchase.do?action=addPayPurchaseInfo",
			success:function(json){
				if(json["result"] == "succ"){
					//alert("付款成功!");
					calMargLRig($("body"),$(".alertWin"));
					$(".alertWin").addClass("succBg").removeClass("errBg");
	        		$(".alertWin i").addClass("icon-smile smileIcon").removeClass("icon-cry cryIcon");
	        		$(".alertWin em").html("付款成功");
	        		commonTipInfoFn($(".alertWin"),function(){
	        			closePayWindow();
					});
				}else if(json["result"] == "fail"){
					//alert("付款失败!");
					commonTipInfoFn($(".alertWin"));
					calMargLRig($("body"),$(".alertWin"));
					$(".alertWin").addClass("errBg").removeClass("succBg");;
					$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
					$(".alertWin em").html("付款失败");
				}else if(json["result"] == "noAbility"){
					//alert("您无权执行此操作!");
					commonTipInfoFn($(".alertWin"));
					calMargLRig($("body"),$(".alertWin"));
					$(".alertWin").addClass("errBg").removeClass("succBg");;
					$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
					$(".alertWin em").html("您无权执行此操作");
				}
			}
		});
	}
}
//去报账Reimbursement
function goReimbursement(poId,inStatus){
	if(inStatus == 2){
		$(".layer").show();
		$(".accountDiv").show();
		$("#poId_bz").val(poId);
	}else{
		//alert("订单状态为全部入库才能进行报账操作");
		commonTipInfoFn($(".alertWin"));
		calMargLRig($("body"),$(".alertWin"));
		$(".alertWin").addClass("errBg").removeClass("succBg");;
		$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
		$(".alertWin em").html("订单状态为全部入库才能进行报账操作");
	}
}
//关闭报账窗口
function closeBzWindow(){
	$(".layer").hide();
	$(".accountDiv").hide();
	$("#poId_bz").val(0);
	//刷新订单列表数据
	queryOrder(option_a);
}
//执行报账
function execReimbursement(){
	var poId = $("#poId_bz").val().replace(/\s+/g, "");;
	$.ajax({
		type:"post",
		async:false,
		dataType:"json",
		data:{poId:poId},
		url:"purchase.do?action=execReimbursement",
		success:function(json){
			if(json["result"]){
				//alert("报账成功!");
				calMargLRig($("body"),$(".alertWin"));
        		$(".alertWin").addClass("succBg").removeClass("errBg");
        		$(".alertWin i").addClass("icon-smile smileIcon").removeClass("icon-cry cryIcon");
        		$(".alertWin em").html("报账成功");
        		commonTipInfoFn($(".alertWin"),function(){
        			closeBzWindow();
				});
			}else{
				//alert("报账失败!");
				calMargLRig($("body"),$(".alertWin"));
				$(".alertWin").addClass("errBg").removeClass("succBg");;
				$(".alertWin i").addClass("icon-cry cryIcon").removeClass("icon-smile smileIcon");
				$(".alertWin em").html("报账失败");
				commonTipInfoFn($(".alertWin"),function(){
					closeBzWindow();
				});
			}
		}
	});
}
</script>
</head>
<body>
	<!-- 头部  -->
	<div class="headWrap">
		<img class="logo fl" src="Module/basicInfo/images/logo.png" alt="镜片车间ERP管理系统"/>
		<div class="perInfoBox fr">
			<div class="perInfo clearfix fl">
				<img class="fl" src="Module/basicInfo/images/user.png"/>
				<p class="timeHello fl"></p>
				<p class="fl">${sessionScope.login_real_name}</p>
			</div>
			<a class="exit fr" href="javascript:void(0)" title="退出系统" onclick="loginOut();">
				<i class="iconfont icon-tuichu exitIcon"></i>
			</a>
		</div>
	</div>
	<!-- 主体  -->
	<div class="mainWrap clearfix">
		<!-- 左侧导航  -->
		<div class="leftPart"></div>
		<!-- 左侧副导航  -->
		<div class="leftSmallNav lfSmNavWid">
			<ul>
				<li onclick="goBasicPage('goProCategoryPage',this)"><span></span>添加产品类别</li>
				<li onclick="goBasicPage('goProPage',this)"><span></span>添加产品信息</li>
				<li onclick="goBasicPage('goBusinessPage',this)"><span></span>添加往来单位信息</li>
				<li onclick="goBasicPage('goWHStoragePage',this)"><span></span>添加仓库货架信息</li>
				<li class="active"  onclick="goBasicPage('goPurchasePage',this)"><span></span>采购信息</li>
				<li onclick="goBasicPage('goInstorePage',this)"><span></span>入库</li>
				
			</ul>
		</div>
		<!-- 右侧对应内容  -->
		<div class="rightPart noSmaNav">
			<!-- 头部搜索框 -->
			<div class="searWrap">
				<div class="searBox comMainWid">
					<p id="headFunArea">
						<a id="addNewPurBtn" class="active" href="javascript:void(0)" onclick="selPurchaseTab(1)">新增采购单</a>
						<span>|</span>
						<a id="viewPurBtn" href="javascript:void(0)" onclick="selPurchaseTab(2)">浏览采购单</a>
					</p>
				</div>
			</div>
			<!-- 新增采购单  -->
			<div class="mainCon comMainWid newAddPurDiv clearfix">
				<!-- 供应商选择、采购编号填写层  -->
				<div class="selBusDiv clearfix">
					<div class="comSelDiv margRSel fl">
						<span>供应商：</span>
						<input id="purVal" type="text" disabled="disabled" alt="0"/>
						<i class="iconfont icon-corrUnit corrUnIcon" onclick="showCorrUnProInfDiv(1)" title="选择供应商"></i>
						<!-- input提示信息 -->
						<div id="corrUnTipDiv" class="tipDiv" >
							<span class="tipTriSpan"></span>
							<p></p>
						</div>
						<i id="sucCorUnit" class="iconfont icon-duihao sucInfoIcon2"></i>
					</div>
					<div class="comSelDiv fl">
						<span>采购单编号：</span>
						<input type="text" id="purOrderNum" disabled="disabled"/>
						<!-- input提示信息 -->
						<div id="purNumTipDiv" class="tipDiv" >
							<span class="tipTriSpan"></span>
							<p></p>
						</div>
						<i id="sucPurNum" class="iconfont icon-duihao sucInfoIcon"></i>
					</div>
				</div>
				<!-- 采购详情数据层  -->
				<div class="purListDataDiv">
					<table class="purListTit" cellpadding="0" cellspacing="0">
						<tr>
							<td class="purListWid1" align="center">序号</td>
							<td class="purListWid5" align="center">产品编码</td>
							<td class="purListWid2" align="center">产品名称</td>
							<td class="purListWid3" align="center">产品规格</td>
							<td class="purListWid7" align="center">材质</td>
							<td class="purListWid4" align="center">产品单价(元)</td>
							<td class="purListWid4" align="center">采购数量</td>
							<td class="purListWid6" align="center">基本单位</td>
							<td class="purListWid4" align="center">总价(元)</td>
							<td class="purListWid1 noBorR" align="center">操作</td>
						</tr>
					</table>
					<table id="purListTable" class="purListTab" cellpadding="0" cellspacing="0"></table>
					<div class="noRecDiv">
						<a href="javascript:void(0)" onclick="addNewPurRec(0)">
							<i class="iconfont icon-noRecord noRecIcon"></i>
							<span>单击增加采购记录</span>
						</a>
					</div>
					<div class="addTrDiv">
						<img class="addTrBtn" src="Module/purchase/images/addPic.png" alt="增加产品" onclick="addNewPurRec(1)"/>
					</div>
				</div>
				<!-- 采购数据汇总层  -->
				<div class="subPurDataDiv">
					<div class="margL fr">
						<input id="invoInp_hid" type="hidden"/>
						<span class="fl">发票：</span>
						<label for="hasInvoInp" class="invoLab">
							<input type="radio" id="hasInvoInp" name="invoiceInp" class="inVoiceRad" value="0"/>
							<em>无</em>
							<span class="cirSpan"></span>
						</label>
						<label for="noInvoInp" class="invoLab marglLab">
							<input type="radio" id="noInvoInp" name="invoiceInp" class="inVoiceRad" value="1"/>
							<em>有</em>
							<span class="cirSpan"></span>
						</label>
					</div>
					<div class="margL fr">
						<input id="payStatusInp" type="hidden"/>
						<span class="fl">付款人：</span>
						<label for="purPayInp" class="payStatusLab">
							<input type="radio" id="purPayInp" name="payStatusInp" class="payStatusRad" value="1"/>
							<em>采购付</em>
							<span class="cirSpan"></span>
						</label>
						<label for="financeInp" class="payStatusLab marglLab">
							<input type="radio" id="financeInp" name="payStatusInp" class="payStatusRad" value="2"/>
							<em>财务付</em>
							<span class="cirSpan"></span>
						</label>
					</div>
					<div class="margL fr">
						<span class="fl">总金额：</span>
						<p id="totaMoney" class="fl">0.00</p>
						<span class="fl">元</span>
					</div>
					<div class="margL fr">
						<span class="fl">制单日期：</span>
						<p id="madeTimeP" class="fl"></p>
					</div>
					<div class="margL1 fr">
						<span class="fl">制单人：</span>
						<p class="fl">${sessionScope.login_real_name}</p>
					</div>
				</div>
				<!-- 采购数据提交按钮  -->
				<a class="submitPurBtn fr" href="javascript:void(0)" onclick="addPurOrder();">提交</a>
			</div>
			<!-- 浏览采购单  -->
			<div class="mainCon comMainWid viewPurDiv clearfix">
				<!-- 根据采购订单单号查询、根据新增采购单时间查询  -->
				<div class="queryDiv clearfix">
					<p class="selCondP">
						<label id="addPurTimSearLab" class="active" onclick="changeSearch(1)">
							<span class="cirSpan"></span>
							<span>根据新增采购单时间查询</span>
							<i class="iconfont icon-duihao selSearIcon"></i>
						</label>
						<label id="purNumSearLab" class="marglLab" onclick="changeSearch(2)">
							<span class="cirSpan"></span>
							<i class="iconfont icon-duihao selSearIcon"></i>
							<span>根据采购单号查询</span>
						</label>
					</p>
					<div class="queryBox fl">
						<div class="comQueryDiv timeCon">
							<span>新增采购单时间：</span>
							<input type="text" id="sTime" class="date" placeholder="请选择开始日期"/>&nbsp;&nbsp;
							<input type="text" id="eTime" class="date" placeholder="请选择结束日期"/>
						</div>
						<script src="Module/commonJs/timeControl/js/moment.min.js"></script>
						<script src="Module/commonJs/timeControl/js/moment.zh-cn.js"></script>
						<script src="Module/commonJs/timeControl/js/ion.calendar.min.js"></script>
						<script>
							$('.date').each(function(){
								$(this).ionDatePicker({
									lang: 'zh-cn',
									format: 'YYYY-MM-DD'
								});
							});
						</script>
						<div class="comQueryDiv">
							<input id="storgStatInp" type="hidden" value="-1"/>
							<span>入库状态：</span>
							<label for="purIngInp">
								<span class="cirSpan"></span>
								<input type="radio" id="purIngInp" class="comStrogStaInp" name="storStaInp" value="0"/>
								<span>采购中</span>
							</label>
							<label for="storLitInp">
								<span class="cirSpan"></span>
								<input type="radio" id="storLitInp" class="comStrogStaInp" name="storStaInp" value="1"/>
								<span>部分入库</span>
							</label>
							<label for="storAllInp">
								<span class="cirSpan"></span>
								<input type="radio" id="storAllInp" class="comStrogStaInp" name="storStaInp" value="2"/>
								<span>全部入库</span>
							</label>
						</div>
						<div class="comQueryDiv">
							<input id="payStatInp" type="hidden" value="-2"/>
							<span>付款状态：</span>
							<label for="noPayInp">
								<span class="cirSpan"></span>
								<input type="radio" id="noPayInp" class="payStaInput" name="payStaInp" value="-1"/>
								<span>未付款</span>
							</label>
							<label for="payLitInp">
								<span class="cirSpan"></span>
								<input type="radio" id="payLitInp" class="payStaInput" name="payStaInp" value="0"/>
								<span>未付清</span>
							</label>
							<label for="finPayAlreInp">
								<span class="cirSpan"></span>
								<input type="radio" id="finPayAlreInp" class="payStaInput" name="payStaInp" value="1"/>
								<span>财务已付</span>
							</label>
							<label for="purPayNoSubInp">
								<span class="cirSpan"></span>
								<input type="radio" id="purPayNoSubInp" class="payStaInput" name="payStaInp" value="2"/>
								<span>采购已付未报账</span>
							</label>
							<label for="purPaySubYesInp">
								<span class="cirSpan"></span>
								<input type="radio" id="purPaySubYesInp" class="payStaInput" name="payStaInp" value="3"/>
								<span>采购已付已报账</span>
							</label>
						</div>
						<a class="queryStaBtn" href="javascript:void(0)" onclick="queryOrder(1);">查询</a>
					</div>
					<div class="queryBox fl">
						<p class="searchPurNum fl">
							<input type="text" id="queryPurNum" value="请输入采购单号" class="searInp_purNum fl"/>
							<a href="javascript:void(0)" class="searA fl" title="查询" onclick="queryOrder(2)">
								<i class="iconfont icon-search searIcon"></i>
							</a>
						</p>
					</div>
					<span class="borSpan"></span>
					<!-- 二选一查询条件遮罩层  -->
					<span class="searLayer"></span>
				</div>
				<!-- 浏览采购单 -->
				<div class="viewPurDiv">
					<ul id="purOrdUl" class="purOrdUl clearfix"></ul>
				</div>
				<div id="purTurnPage" class="comTurnPagDiv">
					<div id="Pagination_pur" class="pagination clearfix"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="layer"></div>
	<!-- 选择产品数据弹窗  -->
	<div class="comAlertDiv proInfoDiv">
		<div class="comDataTop">
			<p>选择产品</p>
			<i class="iconfont icon-close closeIcon comTransition" onclick="closeAlertWin($('.proInfoDiv'),'selPro')"></i>
		</div>
		<div class="searLay">
			<!-- 根据拼音码搜索层  -->
			<div class="searchDiv">
				<input type="text" id="searInput_pro" value="请输入产品拼音码" class="searInp fl"/>
				<a href="javascript:void(0)" class="searA fl" title="查询"  onclick="showProductList(null,0);">
					<i class="iconfont icon-search searIcon"></i>
				</a>
			</div>
			<!-- 增加产品类别层  -->
			<a class="addCategUnitBtn" href="javascript:void(0)" onclick="showComAddWin(3)">
				<i class="iconfont icon-tianjia addCaIcon fl"></i>
				<span class="fl">添加产品类别</span>
			</a>
			<!-- 增加产品基本信息层  -->
			<a class="addCategBtn" href="javascript:void(0)" onclick="showComAddWin(4)">
				<i class="iconfont icon-tianjia addCaIcon fl"></i>
				<span class="fl">添加产品</span>
			</a>
		</div>
		<!-- 产品类别产品具体信息数据层  -->
		<div class="comDataDiv clearfix">
			<!-- left 类别数据  -->
			<div class="comLeftData proCategDataDiv fl">
				<p class="categTit"><i class="iconfont icon-categ categIcon"></i><span>产品类别</span></p>
				<div id="categDataDivPro" class="categDataDiv">
					<ul id="categDataUlPro" class="categDataUl"></ul>
				</div>
			</div>
			<!-- right 详细信息数据  -->
			<div class="comRightData fl">
				<!-- 数据层  -->
				<div class="tabData">
					<table class="dataTitTab" cellpadding="0" cellspacing="0">
						<tr>
							<td class="lisDaWid1" align="center">选择</td>
							<td class="lisDaWid1" align="center">序号</td>
							<td class="lisDaWid2" align="center">产品名称</td>
							<td class="lisDaWid3" align="center">产品库存</td>
							<td class="lisDaWid3" align="center">产品规格</td>
							<td class="lisDaWid3" align="center">产品均价</td>
							<td class="lisDaWid3" align="center">最高价格</td>
							<td class="lisDaWid3 noBorR" align="center">最低价格</td>
						</tr>
					</table>
					<table id="dataListTab_pro" class="dataListTab" cellpadding="0" cellspacing="0">
						<!-- 分页的话一页8条数据  -->
					</table>
				</div>
				<div id="proTurnPage" class="comTurnPagDiv">
					<div id="Pagination_pro" class="pagination clearfix"></div>
				</div>
				<div class="botDiv">
					<label class="selAllLab">
						<span class="checkSpan"></span>
						<input type="checkbox" id="selAllPro"  onclick="selectAllPro()"/>
						<span class="selAllTxt">全选</span>
					</label>
					<!-- 选中保存按钮  -->
					<a class="saveDataBtn fr" href="javascript:void(0)" onclick="insertProList();">选择</a>
				</div>
			</div>
		</div>
		<!-- 添加产品类别和产品基本信息遮罩层  -->
		<div class="addNewDataDiv addProData">
			<!-- 添加产品类别  -->
			<div class="addProCategDiv">
				<div class="comCategDiv margT_cate">
					<span>类别名称：</span>
					<input type="text" class="comInp_add" id="proType_add"/>
					<!-- input提示信息  -->
					<div id="categProNaDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="typeTips_add"></p>
					</div>
					<i id="sucProCategNam" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comCategDiv">
					<span>类别备注：</span>
					<input type="text" class="comInp_add" id="typeRemark_add" placeholder="最多不超过20个字" maxlength="20"/>
				</div>
				<a class="saveCategBtn" href="javascript:void(0)" onclick="addCommProType('addProCategDiv','proType_add','typeRemark_add','categProNaDiv','purchase','proType');">添加保存</a>
				<a class="cancelBtn" href="javascript:void(0)" onclick="closeAddProTypeWindow('addProCategDiv','proType_add','typeRemark_add','categProNaDiv','purchase')">取消</a>
			</div>
			<!-- 添加产品基本信息 -->
			<div class="addProInfoDiv">
				<div class="comAddDiv margT">
					<span>产品名称：</span>
					<input type="text" class="comInp_add" id="proName_add"/>
					<!-- input提示信息 -->
					<div id="proNameDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="proName_add_tips"></p>
					</div>
					<i id="sucProName" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv margT">
					<span class="fl">产品类别：</span>
					<div class="selCategDiv_pro fl">
						<!-- 将确定的分类增加到p标签里面 -->
						<p id="proTypeId_add" alt="0"></p>
						<a class="classifyA" href="javascript:void(0)" title="查看分类" onclick="selCategBankWin(1)">
							<i class="iconfont icon-fenlei2 classifyIcon"></i>
						</a>
					</div>
					<!-- input提示信息 -->
					<div id="proCategDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="proTypeId_add_tips"></p>
					</div>
					<i id="sucProCateg" class="iconfont icon-duihao sucInfoIcon1"></i>
				</div>
				<div class="comAddDiv margT">
					<span>产品编码：</span>
					<input type="text" class="comInp_add" id="proCode_add"/>
					<!-- input提示信息 -->
					<div id="proCodeDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="proCode_add_tips"></p>
					</div>
					<i id="sucProCode" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>产品规格：</span>
					<input type="text" class="comInp_add" id="proFormatInfo_add"/>
					<!-- input提示信息 -->
					<div id="proFormatDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="proFormatInfo_add_tips"></p>
					</div>
					<i id="sucProFormat" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>基本单位：</span>
					<input type="text" class="comInp_add" id="proUnit_add"/>
					<!-- input提示信息 -->
					<div id="basicUnit" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="proUnit_add_tips"></p>
					</div>
					<i id="sucBasicUn" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>材质要求：</span>
					<input type="text" class="comInp_add" id="proMater_add"/>
					<!-- input提示信息 -->
					<div id="materReqDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="proMater_add_tips"></p>
					</div>
					<i id="sucMatReq" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<input id="categStyInp" type="hidden" value=""/>
					<span class="fl">类别类型：</span>
					<label for="categSty_buy" class="categStyLab">
						<input type="radio" id="categSty_buy" name="categStyRad" value="b" class="comCategStyInp"/>
						<em>购进</em>
						<span class="cirSpan"></span>
					</label>
					<label for="categSty_made" class="categStyLab">
						<input type="radio" id="categSty_made" name="categStyRad" value="m" class="comCategStyInp"/>
						<em>制造</em>
						<span class="cirSpan"></span>
					</label>
					<!-- input提示信息 -->
					<div id="proCategStyDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="categStyInp_tips"></p>
					</div>
				</div>
				<div class="comAddDiv">
					<span>产品备注：</span>
					<input type="text" class="comInp_add" id="proRemark_add" placeholder="不能超过30字" maxlength="30"/>
				</div>
				<a class="saveCorInfoBtn" href="javascript:void(0)" onclick="addPro();">添加保存</a>
				<a class="cancelBtn" href="javascript:void(0)" onclick="comCancelAdd(4)">取消</a>
				<!-- 选择产品类别层  -->
				<div class="selProCategLay">
					<p>当前类别&gt;&gt;<span id="nowCateg_pro"></span></p>
					<div id="selCategWrap_pro">
						<ul id="selCategUl_pro" class="clearfix"></ul>
					</div>
					<a class="selCategBtn" href="javascript:void(0)" onclick="selCagetBankName(2,$('#nowCateg_pro'),'暂未选择产品类别')">确定</a>
					<a class="cancelBtn" href="javascript:void(0)" onclick="comCanCategBankWin(1)">取消</a>
				</div>
			</div>
		</div>
	</div>
	<!-- 供应商数据层弹窗  -->
	<div class="comAlertDiv purDataDiv">
		<div class="comDataTop">
			<p>选择业务往来单位</p>
			<i class="iconfont icon-close closeIcon comTransition" onclick="closeAlertWin($('.purDataDiv'),'selBus')"></i>
		</div>
		<div class="searLay">
			<!-- 根据拼音码搜索层  -->
			<div class="searchDiv">
				<input type="text" id="searInput" value="请输入往来单位拼音码" class="searInp fl"/>
				<a href="javascript:void(0)" class="searA fl" title="查询"  onclick="queryBusinessList(null,0)">
					<i class="iconfont icon-search searIcon"></i>
				</a>
			</div>
			<!-- 增加往来单位类别层  -->
			<a class="addCategUnitBtn" href="javascript:void(0)" onclick="showComAddWin(1)">
				<i class="iconfont icon-tianjia addCaIcon fl"></i>
				<span class="fl">添加单位类别</span>
			</a>
			<!-- 增加单位基本信息层  -->
			<a class="addCategBtn" href="javascript:void(0)" onclick="showComAddWin(2)">
				<i class="iconfont icon-tianjia addCaIcon fl"></i>
				<span class="fl">添加单位</span>
			</a>
		</div>
		<!-- 往来单位类别 单位具体信息数据层  -->
		<div class="comDataDiv clearfix">
			<!-- left 类别数据  -->
			<div class="comLeftData corUnCategDataDiv fl">
				<p class="categTit"><i class="iconfont icon-categ categIcon"></i><span>往来单位类别</span></p>
				<div id="categDataDivPur" class="categDataDiv">
					<ul id="categDataUlPur" class="categDataUl"></ul>
				</div>
			</div>
			<!-- right 详细信息数据  -->
			<div class="comRightData fl">
				<!-- 数据层  -->
				<div class="tabData">
					<table class="dataTitTab" cellpadding="0" cellspacing="0">
						<tr>
							<td class="listDataWid1" align="center">序号</td>
							<td class="listDataWid2" align="center">单位名称</td>
							<td class="listDataWid3" align="center">拼音码</td>
							<td class="listDataWid3" align="center">联系人</td>
							<td class="listDataWid4" align="center">联系电话</td>
							<td class="listDataWid4" align="center">联系手机</td>
							<td class="listDataWid2" align="center">电子邮箱</td>
							<td class="listDataWid5 noBorR" align="center">单位地址</td>
						</tr>
					</table>
					<table id="dataListTab_un" class="dataListTab" cellpadding="0" cellspacing="0">
						<!-- 分页的话一页8条数据  -->
					</table>
				</div>
				<!-- 选中保存按钮  -->
				<!-- 翻页  -->
				<div id="bsTurnPage" class="comTurnPagDiv">
					<div id="Pagination" class="pagination clearfix"></div>
				</div>
			</div>
		</div>
		<!-- 添加往来单位类别 单位基本信息遮罩层  -->
		<div class="addNewDataDiv addPurData">
			<!-- 添加往来单位类别  -->
			<div class="addCorrUnDiv">
				<div class="comCategDiv margT_cate">
					<span>类别名称：</span>
					<input type="text" class="comInp_add" id="typeName_add"/>
					<!-- input提示信息  -->
					<div id="categNameDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="cateNameInfo"></p>
					</div>
					<i id="sucCategNam" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comCategDiv">
					<span>类别备注：</span>
					<input type="text" class="comInp_add" id="typeRemark_add"/>
				</div>
				<a class="saveCategBtn" href="javascript:void(0)" onclick="addBsType();">添加保存</a>
				<a class="cancelBtn" href="javascript:void(0)" onclick="comCancelAdd(1)">取消</a>
			</div>
			<!-- 添加往来单位基本信息 -->
			<div class="addCorrUnInfo">
				<div class="comAddDiv margT">
					<span>单位名称：</span>
					<input type="text" class="comInp_add" id="bcName_add" onBlur="autoAddPyCode();"/>
					<!-- input提示信息 -->
					<div id="compNameDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcNameInfo"></p>
					</div>
					<i id="sucCompName" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv margT">
					<span class="fl">单位类别：</span>
					<div class="selCategDiv_un fl">
						<!-- 将确定的分类增加到p标签里面 -->
						<p id="bcTypeId_add" alt="0"></p>
						<a class="classifyA" href="javascript:void(0)" title="查看分类"  onclick="selCategBankWin(2)">
							<i class="iconfont icon-fenlei2 classifyIcon"></i>
						</a>
					</div>
					<!-- input提示信息 -->
					<div id="compCategDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcTypeIdInfo"></p>
					</div>
					<i id="sucCompCateg" class="iconfont icon-duihao sucInfoIcon1"></i>
				</div>
				<div class="comAddDiv margT">
					<span>拼<i class="blank"></i>音<i class="blank"></i>码：</span>
					<input type="text" class="comInp_add" id="bcPyCode_add" readonly/>
					<!-- input提示信息 -->
					<div id="compSimpDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p></p>
					</div>
					<i id="sucCompSimp" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>联<i class="blank"></i>系<i class="blank"></i>人：</span>
					<input type="text" class="comInp_add" id="bContact_add"/>
					<!-- input提示信息 -->
					<div id="compContDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bContactInfo"></p>
					</div>
					<i id="sucCompCont" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>联系电话：</span>
					<input type="text" class="comInp_add" id="bcTel_add"/>
					<!-- input提示信息 -->
					<div id="compTelDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcTelInfo"></p>
					</div>
					<i id="sucCompTel" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>联系手机：</span>
					<input type="text" class="comInp_add" id="bcMobile_add"/>
					<!-- input提示信息 -->
					<div id="compPhoneDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcMobileInfo"></p>
					</div>
					<i id="sucCompPhone" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>单位传真：</span>
					<input type="text" class="comInp_add" id="bcFax_add"/>
					<!-- input提示信息 -->
					<div id="compFaxDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcFaxInfo"></p>
					</div>
					<i id="sucCompFax" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span class="fl">开户银行：</span>
					<div class="selBankDiv fl">
						<!-- 将确定的银行名称增加到p标签里面 -->
						<p id="bcBankName_add"></p>
						<a class="classifyA" href="javascript:void(0)" title="选择银行" onclick="selCategBankWin(3)">
							<i class="iconfont icon-fenlei2 classifyIcon"></i>
						</a>
					</div>
					<!-- input提示信息 -->
					<div id="compBankNaDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcBankNameInfo"></p>
					</div>
					<i id="sucCompBankNa" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv" style="z-index:2;">
					<span>银行卡号：</span>
					<input type="text" id="bankAcc" class="comInp_add" onkeyup="clearWord('bankAcc','pattbBankNum')" maxlength="19"/>
					<!-- 银行卡号格式化 -->
					<span id="bankTri" class="bankNumTri"></span>
					<input type="text" id="pattbBankNum" class="patternDiv posInp2" readonly />	
					<!-- input提示信息 -->
					<div id="compBankNum" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcBankNumInfo"></p>
					</div>
					<i id="sucCompBankNum" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv">
					<span>电子邮箱：</span>
					<input type="text" class="comInp_add" id="bcEmail_add"/>
					<!-- input提示信息 -->
					<div id="compEmailDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcEmailInfo"></p>
					</div>
					<i id="sucCompEmail" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<div class="comAddDiv1">
					<span>单位地址：</span>
					<input type="text" class="comInp_add1" id="bcAddress_add"/>
					<!-- input提示信息 -->
					<div id="compAddDiv" class="tipDiv">
						<span class="tipTriSpan"></span>
						<p id="bcAddressInfo"></p>
					</div>
					<i id="sucCompAdd" class="iconfont icon-duihao sucInfoIcon"></i>
				</div>
				<a class="saveCorInfoBtn" href="javascript:void(0)" onclick="addBizContact();">添加保存</a>
				<a class="cancelBtn" href="javascript:void(0)" onclick="comCancelAdd(2)">取消</a>
				<!-- 选择单位类别数据弹层  -->
				<div class="selCategLay">
					<p>当前类别&gt;&gt;<span id="nowCateg_unit" alt="0"></span></p>
					<div id="selCategWrap_un">
						<ul id="selCategUl_un" class="clearfix"></ul>
					</div>
					<a class="selCategBtn" href="javascript:void(0)" onclick="selCagetBankName(1,$('#nowCateg_unit'),'暂未选择单位类别')">确定</a>
					<a class="cancelBtn" href="javascript:void(0)" onclick="comCanCategBankWin(2)">取消</a>
				</div>
				<!-- 选择银行数据弹层  -->
				<div class="selBankLay">
					<p class="nowBankP">当前银行&gt&gt<span id="nowBank"></span></p>
					<input id="selBankInp" type="hidden"/>
					<div class="bankDiv">
						<ul class="bankMidWinDiv">
			    			<li>
			    				<span class="comBankIcon icbcIcon"></span>
			    				<p>中国工商银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中国工商银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon abcIcon"></span>
			    				<p>中国农业银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中国农业银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon ccbIcon"></span>
			    				<p>中国建设银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中国建设银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon cmbIcon"></span>
			    				<p>招商银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="招商银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon bocIcon"></span>
			    				<p>中国银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中国银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon psbcIcon"></span>
			    				<p>中国邮政储蓄银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中国邮政储蓄银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon commIcon"></span>
			    				<p>交通银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="交通银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon citicIcon"></span>
			    				<p>中信银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中信银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon cmbcIcon"></span>
			    				<p>中国民生银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中国民生银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon cebIcon"></span>
			    				<p>中国光大银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="中国光大银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon cibIcon"></span>
			    				<p>兴业银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="兴业银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon spdbIcon"></span>
			    				<p>浦发银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="浦发银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon gdbIcon"></span>
			    				<p>广发银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="广发银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
			    			<li>
			    				<span class="comBankIcon hxbankIcon"></span>
			    				<p>华夏银行</p>
			    				<input type="radio" class="com_BankRdio" name="bankRadio" value="华夏银行"/>
			    				<span class="comCirSpan"></span>
			    			</li>
	    				</ul>
					</div>
					<a class="selCategBtn" href="javascript:void(0)" onclick="selCagetBankName(3,$('#nowBank'),'尚未选择开户银行')">确定</a>
					<a class="cancelBtn" href="javascript:void(0)" onclick="comCanCategBankWin(3)">取消</a>
				</div>
			</div>
		</div>
	</div>
	<!-- 付款状态为未付款未付清状态时的付款窗口  -->
	<div class="goPayDiv">
		<p class="goPayTit">
			<i class="iconfont icon-fukuan""></i><span id="winInfo">付款窗口</span>
			<i class="iconfont icon-close closeGoPay comTransition"  onclick="closePayWindow();"></i>
		</p>
		<input type="hidden" id="poId_pay" value=0/>
		<div class="comGoPayDiv payMargT">
			<p>总&nbsp;&nbsp;金&nbsp;额：<span id="allMoney"></span>元</p>
		</div>
		<div class="comGoPayDiv">
			<p>实付金额：<span id="payedMoney"></span>元</p>
		</div>
		<div class="comGoPayDiv">
			<p>应付金额：<span id="noPayedMoney"></span>元</p>
		</div>
		<div class="comGoPayDiv">
			<input type="text" id="currPayMoney" placeholder="最大金额不能超过应付金额"/>
			<a href="javascript:void(0)" onclick="payMoney();">付款</a>
		</div>
		<!--  
			最大金额不能超过应付金额
			金额数值只能为数字
		 -->
		<p class="goPayTipInfo"><i class="iconfont icon-tip"></i><span id="payTipInfo"></span></p>
	</div>
	<!-- 是否确认报账confirm窗口  -->
	<div class="accountDiv">
		<p>是否确认报账？</p>
		<div class="goPayAccDiv">
			<input type="hidden" id="poId_bz" value="0"/>
			<a class="sureAccBtn" href="javascript:void(0)" onclick="execReimbursement();";>确定</a>
			<a class="cancelAccBtn" href="javascript:void(0)" onclick="closeBzWindow();">取消</a>
		</div>
	</div>
	<div class="alertWin">
		<i class="iconfont fl"></i>
		<em class="fl"></em>
	</div>
</body>
</html>